
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the WaChat application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "name": {
          "type": "string",
          "description": "The display name of the user."
        },
        "avatar": {
          "type": "string",
          "description": "URL of the user's profile picture.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "email",
        "name",
        "avatar"
      ]
    },
    "Device": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Device",
      "type": "object",
      "description": "Represents a device linked to a user account.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the device entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Device)"
        },
        "deviceId": {
          "type": "string",
          "description": "Unique device identifier provided by the platform."
        },
        "platform": {
          "type": "string",
          "description": "The platform of the device (e.g., iOS, Android, Web)."
        },
        "lastLogin": {
          "type": "string",
          "description": "Timestamp of the device's last login.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "deviceId",
        "platform",
        "lastLogin"
      ]
    },
    "Chat": {
      "title": "Chat",
      "type": "object",
      "description": "Represents a chat conversation between two or more users.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the chat entity."
        },
        "userIds": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "An array of user IDs participating in the chat."
        },
        "users": {
          "type": "array",
          "items": {
            "$ref": "#/backend/entities/User"
          },
          "description": "An array of partial user objects for display purposes."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of the last activity in the chat."
        }
      },
      "required": [
        "id",
        "userIds",
        "users"
      ]
    },
    "ChatMessage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ChatMessage",
      "type": "object",
      "description": "Represents a single message in a chat conversation.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the chat message entity."
        },
        "senderId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N ChatMessage as sender)"
        },
        "text": {
          "type": "string",
          "description": "The content of the message."
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the message was sent.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "senderId",
        "text",
        "timestamp"
      ]
    },
    "CustomAI": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CustomAI",
      "type": "object",
      "description": "Represents a custom AI created by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the custom AI entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N CustomAI)"
        },
        "name": {
          "type": "string",
          "description": "The name of the custom AI."
        },
        "description": {
          "type": "string",
          "description": "Description of the custom AI's purpose and functionality."
        },
        "configuration": {
          "type": "string",
          "description": "Configuration settings for the custom AI (e.g., model parameters, training data). Stored as a JSON string."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the custom AI was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp of when the custom AI was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "name",
        "description",
        "configuration",
        "createdAt",
        "updatedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous",
      "google.com"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/backend/entities/User"
      },
      "description": "Stores public user profiles. Listable and readable by any authenticated user for discovery, but writable only by the owner."
    },
    "/users/{userId}/devices/{deviceId}": {
      "schema": {
        "$ref": "#/backend/entities/Device"
      },
      "description": "Stores devices linked to a user account. Path-based ownership: User can only access their own devices."
    },
    "/users/{userId}/customAIs/{customAIId}": {
      "schema": {
        "$ref": "#/backend/entities/CustomAI"
      },
      "description": "Stores custom AIs created by users. Path-based ownership: User can only access their own custom AIs."
    },
    "/chats/{chatId}": {
      "schema": {
        "$ref": "#/backend/entities/Chat"
      },
      "description": "Stores metadata about a chat conversation. Only accessible by chat participants."
    },
    "/chats/{chatId}/messages/{messageId}": {
      "schema": {
        "$ref": "#/backend/entities/ChatMessage"
      },
      "description": "Stores the messages for a specific chat. Only accessible by chat participants."
    }
  }
}
